targetCompaniesSelector.setAttribute("multiple","multiple"),$targetCompaniesSelector=$("#company-selector-new").select2({width:"100%",placeholder:"Your Target Company",tags:!0,matcher:matchMaker,minimumInputLength:3});const explainers={"wwyg-trial":["Interview Preparation Program - Trial"],"wwyg-ipp":["Interview Preparation Program - 1 month","Interview Preparation Program - 2 months","Interview Preparation Program - 3 months"],"wwyg-mi":["Mock Interview - 1 session","Mock Interview - 3 sessions","Mock Interview - 5 sessions","Mock Interview - 10 sessions"],"wwyg-cs":["Consulting Session - 1 session","Consulting Session - 3 sessions","Consulting Session - 5 sessions","Consulting Session - 10 sessions"]};for(let e in explainers)if(explainers[e].includes(`${currentPackageId} - ${currentPackageDetail.name}`)){getElement(e).style.display="block";break}function handlePaymentSectionUI(){updatePaymentInfo(),packagePriceSelector.innerText=`${currencyMap[pkDetails.currency]} ${pkDetails.price}`,discountPriceSelector.innerText=`${currencyMap[pkDetails.currency]} 0`,hideElements([couponErrorSelector,couponSuccessSelector]),gstAdded?"INR"!==pkDetails.currency&&(gstLabel.innerText="IGST (18%)"):hideElements([gstContainer]),accessToken?(showElements([payNowWrapper]),hideElements([payNowOverlay])):hideElements([payNowWrapper])}function updatePaymentInfo(e){let t=pkDetails.price,r=e||0,n=Math.ceil(r*t).toFixed(2),o=t-n;gstPrice=addGST&&gstAdded?.18*o:0,totalPrice=addGST?o.toFixed(2):(o+gstPrice).toFixed(2),pkDetails.totalPrice=totalPrice,gstPriceDiv.innerText=addGST?`${currencyMap[pkDetails.currency]} ${gstPrice.toFixed(2)} `:`${currencyMap[pkDetails.currency]} 00`,discountPriceSelector.innerText=`- ${currencyMap[pkDetails.currency]} ${n}`,totalPriceSelector.innerText=`${currencyMap[pkDetails.currency]} ${totalPrice}`,r&&(couponSuccessSelector.innerText=`Coupon Applied! You are saving ${currencyMap[pkDetails.currency]} ${n} `)}function updateUI(){handlePaymentSectionUI()}function updateCheckoutValuesOnShown(){pkDetails=JSON.parse(localStorage.getItem("packageDetails")),totalPrice=0,coupon="",gstAdded=pkDetails.addGST||!1,gstPrice=0,updateUI()}function populatePreferredCompanies(e){e.sort();for(let t in e)$targetCompaniesSelector.append(new Option(e[t],e[t],!1,!1))}function getCompanies(){getAllCompanies(function(e){populatePreferredCompanies(e.companyArray)})}closeLoginModalIcon.onclick=function(e){e.preventDefault(),e.stopPropagation(),closeLoginModal()},closeCheckout.addEventListener("click",function(e){e.preventDefault(),closeCheckoutModal(),scrollBody("scroll")}),getCompanies();var paymentCheckoutSelectors=document.querySelectorAll(".payment-checkout");const successGetAllPriceForCountry=e=>{console.log("success response",e)};function commonProceedToCheckout(e){verifiedUser?(updateCheckoutValuesOnShown(),showElements([checkoutModal],"flex")):(customOnSignInMethod=function(){hideElements([loginModal]),updateCheckoutValuesOnShown(),showElements([checkoutModal],"flex")},customOnSignIn=!0,showLoginModal(e))}function commonSaveInfoToLocalStorage(e){let t=domainSelector.options[domainSelector.selectedIndex].text,r=`${t} Domain`;const n=+currentPrice;packageDetails={package:e,experience_id:mentorExperienceSelector.value,experience:targetRoleSelector.options[targetRoleSelector.selectedIndex].text,target_companies:r,domain_id:domainSelector.options[domainSelector.selectedIndex].value,domain:t,target_role:`${targetRoleSelector.options[targetRoleSelector.selectedIndex].text} ${t}`,preferred_mentor_experience:mentorExperienceSelector.selectedOptions[0].text,designation:mentorExperienceSelector.value,currency:currentCurrency,price:n,country:country,addGST:addGST,upcoming_interview:currentUpcomingInterviewSchedule,package_type:currentPackageType,target_companies:currenTargetCompanies,mentor_instructions:currentMentorInstruction,version:"default"},localStorage.setItem("packageDetails",JSON.stringify(packageDetails))}function commonPaymentCheckout(e,t){try{commonSaveInfoToLocalStorage(e),triggerEvent("Checkout Started",{experience:packageDetails.experience,domain:packageDetails.domain,designation:packageDetails.designation,target_companies:packageDetails.target_companies,logged_in:!!accessToken,items:packageDetails}),commonProceedToCheckout(t)}catch(e){console.error("error in commonPaymentCheckout()",e)}}function commonDisableLowerMentorDesignationOptions(){let e=experienceList.indexOf(targetRoleSelector.value);for(let t in mentorExperienceSelector.options)mentorExperienceSelector.options[t].disabled=e>t}const creatBubbleButton=(e,t,r)=>`\n<label id="w-node-_60605411-097f-b674-15a6-b170c86ed9${r}8-b4e2d655" class="duration-count-radio-field-parent w-radio">\n  <h3 class="duration-count-text">${e}</h3>\n  <input type="radio" name="Type-Options" id="${e}" value="${e}" data-name="Type Options" required="" class="w-form-formradioinput actual-radio-button w-radio-input">\n  <span data-w-id="60605411-097f-b674-15a6-b170c86ed9${r}c" for="${e}" class="radio-field-label pill w-form-label" style="border-color: rgb(232, 231, 238);"></span>\n  <h3 class="save_text">${t}</h3>\n</label>`;function createBubbleButtons(){for(let e=0;e<pricing.length;e++)if(pricing[e].name===currentPackageId)for(let t=0;t<pricing[e].type.length;t++){let r=pricing[e].type[t].DiscountText,n=pricing[e].type[t].name,o=pricing[e].type[t].preference_order,i=creatBubbleButton(n,r,o);selectDurationOrCountSelector.insertAdjacentHTML("beforeend",i)}}function setCurrentPrice(){for(let e=0;e<pricing.length;e++)if(pricing[e].name===currentPackageId){currentPackageDetails=pricing[e];for(let t=0;t<pricing[e].type.length;t++){if(pricing[e].type[t].name===currentPackageType){currentPackageDetail=pricing[e].type[t];break}if(1===pricing[e].type[t].preference_order&&!currentPackageType){currentPackageDetail=pricing[e].type[t],currentPackageType=pricing[e].type[t].name;break}}break}for(let e=0;e<currentPackageDetail.pricing.length;e++){if("INR"===currentCurrency&&currentPackageDetail.pricing[e].experience_level===currentMentorExperience){currentPrice=currentPackageDetail.pricing[e].inr_pricing,currentSku=currentPackageDetail.pricing[e].sku;break}if("INR"!==currentCurrency&&currentPackageDetail.pricing[e].experience_level===currentMentorExperience){currentPrice=currentPackageDetail.pricing[e].usd_pricing,currentSku=currentPackageDetail.pricing[e].sku;break}}}function commonUpdatePricing(){currentMentorExperience=mentorExperienceSelector.options[mentorExperienceSelector.selectedIndex].value?mentorExperienceSelector.options[mentorExperienceSelector.selectedIndex].value:currentMentorExperience,setCurrentPrice()}function bubbleButtonClicks(){bubbleButtonsSelectors=document.querySelectorAll("[name=Type-Options]"),bubbleButtonsSelectors.forEach(e=>{if(e.value===currentPackageType){e.parentElement.lastElementChild.previousElementSibling.classList.add("bubble-button-border")}e.addEventListener("click",function(t){currentPackageType=e.value,packageTypeShow(),commonUpdatePricing(),commonSaveInfoToLocalStorage(currentPackageId),updateCheckoutValuesOnShown(),bubbleButtonsSelectors.forEach(e=>{e.parentElement.lastElementChild.previousElementSibling.classList.remove("bubble-button-border")}),e.parentElement.lastElementChild.previousElementSibling.classList.toggle("bubble-button-border")})})}function emptyBubbleButtons(){const e=document.getElementsByClassName("duration-count-selector-grid")[0];for(;e.lastChild;)e.removeChild(e.lastChild)}function openCheckoutModal(e,t){currentPackageId=e,emptyBubbleButtons(),createBubbleButtons(),bubbleButtonClicks(),commonUpdatePricing(),commonPaymentCheckout(currentPackageId,t)}function packageTypeShow(){for(let e in explainers)getElement(e).style.display="none",explainers[e].includes(`${currentPackageId} - ${currentPackageType}`)&&(getElement(e).style.display="block")}function getAllPricing(e){let t=apiBaseURL+"pricing/get-price/v2";getAPI(t,function(t){200===t.status&&e(t.data)},function(e){console.error("error getting Price",e)})}function commonSetGSTFlag(e){addGST=e}function commonGetPricingData(){getAllPricing(function(e){pricing=e,currentCurrency="India"===country?"INR":"USD",commonSetGSTFlag(!1);let t=Object.fromEntries(new URLSearchParams(window.location.search).entries());if(t.checkout&&t["package-id"]&&t["package-type"]&&e){currentPackageId=t["package-id"],currentPackageType=t["package-type"],currentTriggerBy="url";const e={button_name:currentButtonName,triggered_by:currentTriggerBy,ecommerce:{items:[{item_id:currentSku,item_name:currentPackageId}]}};sendAnalyticsToSegment.track("select_item",e),packageTypeShow(),openCheckoutModal(currentPackageId)}})}function onCouponApplied(e){updatePaymentInfo(e),showElements([couponSuccessSelector]),couponSubmitSelector.innerText="Redeem"}function onInvalidCoupon(){showElements([couponErrorSelector]),couponSubmitSelector.innerText="Redeem",updatePaymentInfo(),coupon=""}function checkCoupon(e,t,r){triggerEvent("Coupon Applied",{coupon:e});let n=apiBaseURL+`pricing/validate-coupon/v2/${e}`;getAPI(n,function(e){if(200===e.status){var n=e.data;t(n)}else r(!1)},function(e){console.error("checkCoupon: ",e),r(!1)})}function payNowButtonLoader(){var e=payNowButtonSelector.firstChild.firstChild,t=payNowButtonSelector.lastElementChild,r=t.previousElementSibling;e.innerText="Loading...",r.style.display="none",t.style.display="block"}function payNowButtonIdealState(){var e=payNowButtonSelector.firstChild.firstChild,t=payNowButtonSelector.lastElementChild,r=t.previousElementSibling;e.innerText="START PREPARING NOW",r.style.display="block",t.style.display="none"}function getLocation(){userLocation?(country=userLocation.country,locationUpdated=!0,commonGetPricingData()):window.waitingForLocation=setInterval(function(){userLocation&&(country=userLocation.country,locationUpdated=!0,commonGetPricingData(),clearInterval(window.waitingForLocation))},300),setTimeout(function(){locationUpdated||(country="India",commonGetPricingData(),clearInterval(window.waitingForLocation))},3e3)}function scrollBody(e){document.body.style.overflow=e}targetRoleSelector.onchange=function(e){e.preventDefault(),currentRole=e.target.value,"select_designation"!==e.target.value&&(targetRoleSelector.classList.remove("error"),mentorExperienceSelector.removeAttribute("disabled")),mentorExperienceSelector.value="select_mentor_experience",commonDisableLowerMentorDesignationOptions(),commonSaveInfoToLocalStorage(currentPackageId),updateCheckoutValuesOnShown()},mentorExperienceSelector.onchange=function(e){e.preventDefault(),currentMentorExperience=e.target.value,"select_mentor_experience"!==e.target.value&&mentorExperienceSelector.classList.remove("error"),commonUpdatePricing(),0==currentPrice?(hideElements([totalPriceSelector]),showElements([priceCalculationSelector])):(hideElements([priceCalculationSelector]),showElements([totalPriceSelector])),commonSaveInfoToLocalStorage(currentPackageId),updateCheckoutValuesOnShown()},domainSelector.onchange=function(e){e.preventDefault(),currentDomain=e.target.value,"select_domain"!==e.target.value&&domainSelector.classList.remove("error"),commonSaveInfoToLocalStorage(currentPackageId)},paymentCheckoutSelectors.forEach(e=>{e.addEventListener("click",function(t){scrollBody("hidden"),"select_mentor_experience"===mentorExperienceSelector.value&&"select_designation"===targetRoleSelector.value&&mentorExperienceSelector.setAttribute("disabled",!0),currentPackageId=e.getAttribute("package-id"),currentPackageType=e.getAttribute("package-type"),currentMentorExperience=e.getAttribute("mentor-experience"),currentRole=e.getAttribute("role"),currentDomain=e.getAttribute("domain"),loginTextSelector=e.getAttribute("login-text"),loginSubtextSelector=e.getAttribute("login-subtext");let r={loginTextSelector:loginTextSelector,loginSubtextSelector:loginSubtextSelector};programNameSelector.innerText=currentPackageId,0==currentPrice?(hideElements([totalPriceSelector]),showElements([priceCalculationSelector])):(hideElements([priceCalculationSelector]),showElements([totalPriceSelector])),currentTriggerBy="button",currentButtonName=e.getAttribute("button-name"),pricing.map(e=>{e.name===currentPackageId&&e.type.map(e=>{e.name===currentPackageType&&(currentSku=e.pricing[0].sku)})});const n={button_name:currentButtonName,triggered_by:currentTriggerBy,ecommerce:{items:[{item_id:currentSku,item_name:currentPackageId}]}};sendAnalyticsToSegment.track("select_item",n),packageTypeShow(),openCheckoutModal(currentPackageId,r)})}),couponSubmitSelector.addEventListener("click",function(e){if(e.preventDefault(),couponSubmitSelector.innerText="Checking",hideElements([couponErrorSelector,couponSuccessSelector]),coupon=couponSelector.value.toUpperCase().trim(),coupon){currentCoupon=coupon;var t={button_name:currentButtonName,triggered_by:currentTriggerBy,ecommerce:{currency:pkDetails.currency,value:+pkDetails.totalPrice,promotion_id:coupon,items:[{item_id:currentSku,item_name:currentPackageId,item_variant:currentMentorExperience,coupon:coupon,currency:pkDetails.currency,addGST:pkDetails.addGST,country:pkDetails.country,designation:pkDetails.designation,domain:pkDetails.domain,domain_id:pkDetails.domain_id,experience:pkDetails.experience,experience_id:pkDetails.experience_id,mentor_instructions:pkDetails.mentor_instructions,package:pkDetails.package,package_type:pkDetails.package_type,preferred_mentor_experience:pkDetails.preferred_mentor_experience,price:pkDetails.price,target_companies:currenTargetCompanies,target_role:pkDetails.target_role,value:+pkDetails.totalPrice,upcoming_interview:pkDetails.upcoming_interview,version:pkDetails.version}]}};sendAnalyticsToSegment.track("select_promotion",t),checkCoupon(coupon,onCouponApplied,onInvalidCoupon)}else couponSubmitSelector.innerText="Redeem",updatePaymentInfo()}),payNowButtonSelector.addEventListener("click",function(e){if(0===$targetCompaniesSelector.val().length||"select_designation"===targetRoleSelector.value||"select_domain"===domainSelector.value||"select_mentor_experience"===mentorExperienceSelector.value)"select_designation"===targetRoleSelector.value&&targetRoleSelector.classList.add("error"),"select_domain"===domainSelector.value&&domainSelector.classList.add("error"),"select_mentor_experience"===mentorExperienceSelector.value&&mentorExperienceSelector.classList.add("error"),0===$targetCompaniesSelector.val().length&&targetCompaniesSelector.parentElement.classList.add("error"),0===$targetCompaniesSelector.val().length&&showElements([tC_ErrorSelector]),$(".error").filter(":first")[0].scrollIntoView();else{const r={button_name:currentButtonName,triggered_by:currentTriggerBy,ecommerce:{currency:pkDetails.currency,value:+pkDetails.totalPrice,coupon:currentCoupon,items:[{item_id:currentSku,item_name:currentPackageId,item_variant:currentMentorExperience,coupon:currentCoupon,currency:pkDetails.currency,addGST:pkDetails.addGST,country:pkDetails.country,designation:pkDetails.designation,domain:pkDetails.domain,domain_id:pkDetails.domain_id,experience:pkDetails.experience,experience_id:pkDetails.experience_id,mentor_instructions:pkDetails.mentor_instructions,package:pkDetails.package,package_type:pkDetails.package_type,preferred_mentor_experience:pkDetails.preferred_mentor_experience,price:pkDetails.price,target_companies:currenTargetCompanies,target_role:pkDetails.target_role,value:+pkDetails.totalPrice,upcoming_interview:pkDetails.upcoming_interview,version:pkDetails.version}]}};if(sendAnalyticsToSegment.track("begin_checkout",r),e.preventDefault(),payNowButtonLoader(),hideElements([orderErrorSelector]),showElements([orderOverlay,orderLoader]),verifiedUser&&verifiedUser.phoneNumber&&verifiedUser.displayName&&verifiedUser.email){function t(e){hideElements([orderErrorSelector]),showElements([orderOverlay,orderLoader]),pkDetails.totalPrice=totalPrice,pkDetails.order_id=e.razorpay_order_id,triggerPurchase(pkDetails);const t={button_name:currentButtonName,triggered_by:currentTriggerBy,ecommerce:{transaction_id:e.razorpay_payment_id,currency:pkDetails.currency,value:+pkDetails.totalPrice,coupon:pkDetails.coupon,items:[{item_id:currentSku,item_name:currentPackageId,item_variant:currentMentorExperience,coupon:pkDetails.coupon,currency:pkDetails.currency,addGST:pkDetails.addGST,country:pkDetails.country,designation:pkDetails.designation,domain:pkDetails.domain,domain_id:pkDetails.domain_id,experience:pkDetails.experience,experience_id:pkDetails.experience_id,mentor_instructions:pkDetails.mentor_instructions,package:pkDetails.package,package_type:pkDetails.package_type,preferred_mentor_experience:pkDetails.preferred_mentor_experience,price:pkDetails.price,target_companies:pkDetails.target_companies,target_role:pkDetails.target_role,value:+pkDetails.totalPrice,upcoming_interview:pkDetails.upcoming_interview,version:pkDetails.version}]}};sendAnalyticsToSegment.track("purchase",t),updateOrder({order_id:e.razorpay_order_id,payment_id:e.razorpay_payment_id||"",signature:e.razorpay_signature||""},function(){hideElements([orderOverlay,orderLoader,checkoutModal]),showElements([thankyouModal],"flex");var e=getElement("redirecting-text");let t=10,r=e.innerText;e.innerText=r+" "+t--+" secs",setInterval(()=>{e.innerText=r+" "+t+(t>1?" secs":" sec"),0==--t&&redirect("/dashboard",!0)},1e3)},function(){onPaymentFailure("update-order")})}pkDetails.coupon=coupon,pkDetails.target_companies=$targetCompaniesSelector.val().join(","),pkDetails.mentor_instructions=mentorInstructionSelector.value,pkDetails.upcoming_interview=currentUpcomingInterviewSchedule,createOrder(pkDetails,function(e){let r=e.razorpay_order_object;if(r){var n={key:e.key||"rzp_test_sPcDgJ2yGLxdzT",amount:r.amount,currency:r.currency,name:"Preplaced Education Pvt. Ltd",description:packageMap[pkDetails.package],order_id:r.id,handler:function(e){t(e)},prefill:{name:verifiedUser.displayName,email:verifiedUser.email,contact:verifiedUser.phoneNumber},notes:{Package:`${packageMap[pkDetails.package]}`,Domain:e.Domain},modal:{ondismiss:function(){const e={button_name:currentButtonName,triggered_by:currentTriggerBy,ecommerce:{currency:pkDetails.currency,value:+pkDetails.totalPrice,coupon:pkDetails.coupon,items:[{item_id:currentSku,item_name:currentPackageId,item_variant:currentMentorExperience,coupon:pkDetails.coupon,currency:pkDetails.currency,addGST:pkDetails.addGST,country:pkDetails.country,designation:pkDetails.designation,domain:pkDetails.domain,domain_id:pkDetails.domain_id,experience:pkDetails.experience,experience_id:pkDetails.experience_id,mentor_instructions:pkDetails.mentor_instructions,package:pkDetails.package,package_type:pkDetails.package_type,preferred_mentor_experience:pkDetails.preferred_mentor_experience,price:pkDetails.price,target_companies:pkDetails.target_companies,target_role:pkDetails.target_role,value:+pkDetails.totalPrice,upcoming_interview:pkDetails.upcoming_interview,version:pkDetails.version}]}};sendAnalyticsToSegment.track("dismiss_payment",e),payNowButtonIdealState()}}},o=new Razorpay(n);o.on("payment.failed",function(e){onPaymentFailure("razorpay"),console.error("razorpay_error:",e.error)}),hideElements([orderOverlay,orderErrorSelector]),o.open()}else t({razorpay_order_id:`${e.orderId}`})},function(){onPaymentFailure("create-order")})}}}),upcomingInterviewSelectors.forEach(e=>{e.addEventListener("click",t=>{currentUpcomingInterviewSchedule=e.getAttribute("value")})}),getLocation(),$(function(){$(window).keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1})}),$("#company-selector-new").select2({width:"100%",placeholder:"Your Target Company",tags:!0,matcher:matchMaker,minimumInputLength:3}).on("change",function(){currenTargetCompanies=$targetCompaniesSelector.val().join(","),targetCompaniesSelector.parentElement.classList.remove("error"),hideElements([tC_ErrorSelector])});